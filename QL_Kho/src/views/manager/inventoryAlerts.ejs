<%- include('../partials/manager/header') %>
  <link rel="stylesheet" href="/css/admin/inventoryAlerts.css">
  <div class="inventory-warning-container">
    <div class="warning-header">
      <h1 class="warning-title">Inventory Alert</h1>
      <div class="warning-threshold">
        <span class="threshold-badge" style="font-weight: 600; color: rgb(144, 30, 30);">
          Warning threshold: <%= helpers.formatCurrency(threshold) %> VNĐ
        </span>
      </div>
    </div>

    <div class="warning-card">
      <div class="card-content">
        <% if (products.length===0) { %>
          <div class="no-warning-alert">
            There are no items exceeding the inventory threshold
          </div>
          <% } else { %>
            <div class="table-responsive-wrapper">
              <table class="inventory-table">
                <thead class="table-header-light">
                  <tr>
                    <th>Product code</th>
                    <th>Product name</th>
                    <th>Quantity</th>
                    <th>Unit</th>
                    <th>Unit price</th>
                    <th>Total value</th>
                  </tr>
                </thead>
                <tbody>
                  <% products.forEach(product=> { %>
                    <tr class="<%= (product.total_value > threshold * 2) ? 'row-danger' : 'row-warning' %>">
                      <td>
                        <%= product.product_code %>
                      </td>
                      <td>
                        <%= product.name %>
                      </td>
                      <td>
                        <%= product.quantity %>
                      </td>
                      <td>
                        <%= product.unit %>
                      </td>
                      <td>
                        <%= helpers.formatCurrency(product.price) %> VNĐ
                      </td>
                      <td><b>
                          <%= helpers.formatCurrency(product.total_value) %> VNĐ
                        </b></td>
                    </tr>
                    <% }) %>
                </tbody>
              </table>
            </div>
            <% } %>
      </div>
    </div>
  </div>

  <script src="/js/darkmode/admin/inventoryAlerts.js"></script>
  <%- include('../partials/manager/footer') %>